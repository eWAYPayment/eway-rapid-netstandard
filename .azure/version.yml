# Generate version string via tag name
steps:
- task: Powershell@2
  name: GenerateVersion
  inputs:
    targetType: 'inline'
    script: |
      $match = "$(Build.SourceBranch)" -match '^refs\/tags\/v(?<version>(\d+\.){2}\d+)'
      if($match -eq $true) {
        $version = $matches['version']
      }
      else {
        $version = Get-Date -Format "yyyy.MM.dd"
      }
      $assemblyVersion= "$version"
      echo "##vso[task.setvariable variable=Version;isOutput=true]$assemblyVersion"